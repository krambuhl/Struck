!function(t,e){if("function"==typeof define&&define.amd)define(["lodash","jquery","exports"],function(n,o,i){t.Struck=e(t,i,n,o)});else if("undefined"!=typeof exports){var n=require("lodash"),o=require("jquery");exports=e(t,exports,n,o)}else t.Struck=e(t,{},t._,t.jQuery)}(this,function(t,e,n,o,i){function r(t){return t.charAt(0).toUpperCase()+t.slice(1)}function s(t){return n.isFunction(t)?t():t}return e.Hook=function(){function t(t,e,n,o){t[e]&&t[e].call(t,n,o)}function e(e,i,r){var s=n.extend({},o,n.isFunction(i)?r:i);return function(){var o;return s.pre&&t(this,s.method,e,s.pre),n.isFunction(i)&&(o=i.apply(this,arguments)),t(this,s.method,e,s.prefix),s.post&&n.defer(t,this,s.method,e,s.post),o}}var o={prefix:"on",pre:"before",post:"after",method:"hook"};return e}(),e.Computed=function(){function t(){var t=n.extend({},e,opts);t=t}var e={};return t}(),e.extend=function(t,e){var o,i=this;o=t&&n.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},n.extend(o,i,e);var r=function(){this.constructor=o};return r.prototype=i.prototype,o.prototype=new r,t&&n.extend(o.prototype,t),o.__super__=i.prototype,o},e.BaseObject=function(){function t(t){this.baseInitiation(t),this.initialize()}function o(t,e){return n.reduce(e,function(e,n){return e[n]=t.get(n),e},{})}return t.prototype.initialize=e.Hook("initialize",n.noop),t.prototype.baseInitiation=e.Hook("baseInitiation",function(t){this.uid=n.uniqueId("struck"),this.options=n.extend({},t)}),t.prototype.destroy=e.Hook("destroy",n.noop),t.prototype.hook=function(t,e){var o=n.rest(arguments,2),i=e||"on",s=i+r(t);return this[s]?this[s].apply(this,o):void 0},t.prototype.get=e.Hook("get",function(t){var e=n.toArray(arguments);return n.isArray(t)?o(this,t):e.length>1?o(this,e):this[t]}),t.prototype.set=e.Hook("set",function(t,e){t=s(t),n.isObject(t)&&n.each(t,function(t,e){this.set(e,t)},this),this[t]=s(e)}),t.extend=e.extend,t.create=function(t,e){var o=this.extend(t);return new o(n.extend({},t,e))},t}(),e.EventObject=function(){function t(t,e,n,i){this._events.push({events:e,func:n,obj:t});var r=n;i.once&&(r=function(){n.apply(t),o(t,e,n,i)})}function o(t,e,o){n.reject(this._events,{events:e,func:o,obj:t})}var r=e.BaseObject.extend({baseInitiation:function(){this.com=new e.Intercom,e.BaseObject.prototype.baseInitiation.apply(this,arguments),this._events=[]}});return r.prototype.hook=function(t,n){var o=n!==i?":"+n:"";e.BaseObject.prototype.hook.apply(this,arguments),this.com.emit(t+o,arguments)},r.prototype.listenTo=function(n,o,i){n instanceof jQuery||n instanceof e.EventObject&&t(n,o,i)},r.prototype.listenOnce=function(){},r.prototype.stopListening=function(){},r.prototype.stopListeningAll=function(){},r.prototype.destroy=function(){e.BaseObject.prototype.destroy.apply(this,arguments),this.stopListeningAll(),this.com.destroy(),delete this.com},r}(),e.Intercom=function(t){function o(t,e){var o=n.isFunction(e)?e.call(t):e;return n.isArray(o)?o:o.split(" ")}function r(t,e,i,r){n.each(o(t,e),function(e){s(t,e,i,{single:r.single,context:r.context,args:r.args})})}function s(t,e,o,i){if(e||o){var r={name:e,callback:o};n.each(f,function(t){i[t]&&(r[t]=i[t])});var s=n.extend({},p,r);t.subscriptions.push(s)}}function u(t,e,r){return e===i||"all"===e?void c(t):void n.each(o(t,e),function(e){c(t,e,r)})}function c(t,e,o){var i=function(t){return o?t.name==e&&t.callback==o:e?t.name==e:!0};t.subscriptions=n.reject(t.subscriptions,i)}function a(t,e,n){e.callback.apply(e.context,n?[n].concat(e.args):e.args),e.single&&c(t,e.name,e.callback)}var p={single:!1,name:"all",callback:n.noop,context:t,args:[]},f=n.keys(p),h=e.BaseObject.extend({baseInitiation:function(){e.BaseObject.prototype.baseInitiation.apply(this,arguments),this.defaultSubscription=n.extend(n.clone(p),{context:this}),this.subscriptions=[]}});return h.prototype.on=function(t,e,o){return r(this,t,e,{single:!1,context:o,args:n.rest(arguments,3)}),this},h.prototype.once=function(t,e,o){return r(this,t,e,{single:!0,context:o,args:n.rest(arguments,3)}),this},h.prototype.off=function(t,e){return u(this,t,e),this},h.prototype.emit=function(t,e){var i=n.reduce(o(this,t),function(t,e){var o=n.filter(this.subscriptions,function(t){return t.name==e},this);return t.concat(o)},[],this);return i=n.unique(i),n.each(i,function(t){a(this,t,e)},this),this},h}(t),e.Model=function(){var t=e.EventObject.extend({baseInitiation:function(){e.EventObject.prototype.baseInitiation.apply(this,arguments),this.data=this.options.data||{}}});return t.prototype.get=e.Hook("get",function(t){return this.data[t]}),t.prototype.set=e.Hook("set",function(t,e){n.isObject(t)?n.extend(this.data,t):this.data[t]=e}),t}(),e.View=function(){function t(t,e){t.ui=n.reduce(e,function(n,o,i){return n[i]=t.$(e[i]),n},{})}var i=["el","ui","template","model"],r=e.EventObject.extend();return r.prototype.baseInitiation=function(){e.EventObject.prototype.baseInitiation.apply(this,arguments);var o=this;n.extend(this,n.pick(this.options,i)),this.model=n.result(o,"model"),this.el&&this.setElement(n.result(this,"el")),this.template&&this.render(),n.defer(function(){t(o,n.result(o,"ui")),o.setup(o.options)})},r.prototype.setElement=function(t){this.$el=o(t).eq(0),this.el=this.$el[0],this.$=function(t){return this.$el.find(t)}},r.prototype.render=n.noop,r.prototype.setup=n.noop,r.prototype.cleaup=n.noop,r.prototype.listenTo=function(){},r}(),e});
//# sourceMappingURL=struck.min.js.map