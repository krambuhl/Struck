!function(t,e){if("function"==typeof define&&define.amd)define(["lodash","jquery","exports"],function(n,o,i){t.Struck=e(t,i,n,o)});else if("undefined"!=typeof exports){var n=require("lodash"),o=require("jquery");exports=e(t,exports,n,o)}else t.Struck=e(t,{},t._,t.jQuery)}(this,function(t,e,n,o,i){function s(t){return t.charAt(0).toUpperCase()+t.slice(1)}return e.Hook=function(){function t(t,e,o){function i(t,e,n){t[s.method]&&t[s.method](e,n)}o=n.isObject(e)?e:o;var s=n.extend({before:!0,after:!0,method:"hook"},o);return function(){s.before&&i(this,t,"before"),e.apply(this,arguments),i(this,t,"on"),s.after&&i(this,t,"after")}}return t}(),e.extend=function(t,e){var o,i=this;o=t&&n.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},n.extend(o,i,e);var s=function(){this.constructor=o};return s.prototype=i.prototype,o.prototype=new s,t&&n.extend(o.prototype,t),o.__super__=i.prototype,o},e.BaseObject=function(){function t(t){this.baseInitiation(t),this.initialize()}return t.prototype.initialize=n.noop,t.prototype.baseInitiation=e.Hook("baseInitiation",function(t){this.uid=n.uniqueId("struck"),this.options=n.extend({},t)}),t.prototype.hook=function(t,e){var o=n.rest(arguments,2),i=e||"on",r=i+s(t);return this[r]?this[r].apply(this,o):void 0},t.extend=e.extend,t.create=function(t){var e=new this(t);return e},t}(),e.EventObject=function(){function t(t,e,n,i){this._events.push({events:e,func:n,obj:t});var s=n;i.once&&(s=function(){n.apply(t),o(t,e,n,i)})}function o(t,e,o){n.reject(this._events,{events:e,func:o,obj:t})}var s=e.BaseObject.extend({baseInitiation:function(){this.com=new e.Intercom,e.BaseObject.prototype.baseInitiation.apply(this,arguments),this._events=[]}});return s.prototype.hook=function(t,n){var o=n!==i?":"+n:"";e.BaseObject.prototype.hook.apply(this,arguments),this.com.emit(t+o,arguments)},s.prototype.listenTo=function(n,o,i){n instanceof jQuery||n instanceof e.EventObject&&t(n,o,i)},s.prototype.listenOnce=function(){},s.prototype.stopListening=function(){},s.prototype.stopListeningAll=function(){},s.prototype.destroy=e.Hook("destroy",function(){this.stopListeningAll()}),s}(),e.Intercom=function(t){function o(t,e){var o=n.isFunction(e)?e.call(t):e;return n.isArray(o)?o:o.split(" ")}function s(t,e,o,i){if(e||o){var s={name:e,callback:o};n.each(a,function(t){i[t]&&(s[t]=i[t])});var r=n.extend(n.clone(u),s);t.subscriptions.push(r)}}function r(t,e,o){var i=function(t){return o?t.name==e&&t.callback==o:e?t.name==e:!0};t.subscriptions=n.reject(t.subscriptions,i)}function c(t,e,n){e.callback.apply(e.context,n?[n].concat(e.args):e.args)}var u={single:!1,name:"all",callback:n.noop,context:t,args:[]},a=n.keys(u),p=e.BaseObject.extend({baseInitiation:function(){e.BaseObject.prototype.baseInitiation.apply(this,arguments),this.defaultSubscription=n.extend(n.clone(u),{context:this}),this.subscriptions=[]}});return p.prototype.on=function(t,e,i){var r=n.rest(arguments,3);n.each(o(this,t),function(t){s(this,t,e,{single:!1,context:i,args:r})},this)},p.prototype.once=function(t,e,i){var r=n.rest(arguments,3);n.each(o(this,t),function(t){s(this,t,e,{single:!0,context:i,args:r})},this)},p.prototype.off=function(t,e){return t===i||"all"===t?void r(this):void n.each(o(this,t),function(t){r(this,t,e)},this)},p.prototype.emit=function(t,e){var i=n.reduce(o(this,t),function(t,e){var o=n.filter(this.subscriptions,function(t){return t.name==e},this);return t.concat(o)},[],this);i=n.unique(i),n.each(i,function(t){c(this,t,e)},this)},p}(t),e.Model=function(){var t=e.EventObject.extend({baseInitiation:function(){e.EventObject.prototype.baseInitiation.apply(this,arguments),this.data=this.options.data||{}}});return t.prototype.get=e.Hook("get",function(t){return this.data[t]}),t.prototype.set=e.Hook("set",function(t,e){n.isObject(t)?n.extend(this.data,t):this.data[t]=e}),t}(),e.View=function(){function t(t,e){t.ui=n.reduce(e,function(n,o,i){return n[i]=t.$(e[i]),n},{})}var i=["el","ui","template","model"],s=e.EventObject.extend();return s.prototype.baseInitiation=function(){e.EventObject.prototype.baseInitiation.apply(this,arguments);var o=this;n.extend(this,n.pick(this.options,i)),this.model=n.result(o,"model"),this.el&&this.setElement(n.result(this,"el")),this.template&&this.render(),n.defer(function(){t(o,n.result(o,"ui")),o.setup(o.options)})},s.prototype.setElement=function(t){this.$el=o(t).eq(0),this.el=this.$el[0],this.$=function(t){return this.$el.find(t)}},s.prototype.render=n.noop,s.prototype.setup=n.noop,s.prototype.cleaup=n.noop,s.prototype.listenTo=function(){},s}(),e});
//# sourceMappingURL=struck.min.js.map